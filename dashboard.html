<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Workflow App</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100">

  <!-- Injected Navbar -->
  <div id="navbar"></div>

  <div class="flex">
    <!-- Injected Sidebar -->
    <aside id="sidebar" class="w-64"></aside>

    <!-- Page Content -->
    <main class="flex-1 p-6">
      <h1 class="text-2xl font-semibold mb-4">Workflows</h1>
      <div id="content" class="grid gap-4"></div>
    </main>
  </div>

  <script type="module">
    import { requireAuth } from './js/auth.js'
    requireAuth()

    async function inject(id, path) {
      const res = await fetch(path)
      if (!res.ok) throw new Error(`Failed to load ${path}`)
      document.getElementById(id).innerHTML = await res.text()
    }

    // Load partials
    const url = new URL('../navbar.html', import.meta.url);
    console.log('Loading:', url.href);
    await inject('navbar', '../components/navbar.html')
    await inject('sidebar', '../sidebar.html')
  </script>

</body>
</html>